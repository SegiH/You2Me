<mat-card>
     <mat-toolbar>
          <span>You2Me {{(moveToServer ? " (Server)" : "") + (debugging ? " (Debugging enabled)" : "")}}</span>
     </mat-toolbar>
     
     <br />

     <mat-grid-list cols="3" rowHeight="fit" *ngIf="currentStep <= 1" [class]="getStepClass()">
          <mat-grid-tile>
               <!-- URL field -->
               <mat-form-field id="URLField" *ngIf="currentStep == 0">
                    <input matInput placeholder='URL' [(ngModel)]="dataService.fields['URL'].Value" [disabled]="isSubmitted">
               </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile>
               <!-- Format dropdown -->
               <mat-form-field id="format" *ngIf="currentStep === 0">  
                    <mat-select placeholder='Format' name="format" [(ngModel)]="dataService.currentFormat" [required]=true [disabled]="isSubmitted">
                         <mat-option *ngFor="let currFormat of dataService.getFormatKeys();trackBy: trackByFn" [value]="currFormat">
                              {{dataService.formats[currFormat].FormatDisplayName}}
                         </mat-option>
                    </mat-select>
               </mat-form-field>

               <!-- Fields -->
               <mat-card class="smaller" *ngIf="currentStep == 1">
                    <mat-form-field *ngFor="let fieldName of dataService.getFieldKeys();trackBy: trackByFn" [class.hidden]="dataService.fieldIsHidden(fieldName,currentStep)">
                         <input matInput [required]="dataService.getFieldProperty(fieldName,'Required')" placeholder={{fieldName}} [(ngModel)]="dataService.fields[fieldName].Value">                    
                    </mat-form-field>
               </mat-card>
          </mat-grid-tile>

          <mat-grid-tile>
               <!-- Name field -->
               <mat-form-field id="NameField" *ngIf="currentStep == 0 && this.dataService.getCurrentFormat() != '' && !this.dataService.isAudioFormat()">
                    <input matInput placeholder='Name' [(ngModel)]="dataService.fields['Name'].Value" [disabled]="isSubmitted">
               </mat-form-field>

               <!-- Next button -->
               <button id="nextButton" *ngIf="!isFinished" matInput mat-raised-button color="primary" (click)="nextButtonClick()" [disabled]="!nextButtonEnabled">Next</button>
          </mat-grid-tile>
     </mat-grid-list>
    
     <mat-grid-list cols="3" rowHeight="fit" class="laststep" *ngIf="isFinished">
          <mat-grid-tile>
               <!-- Download Button -->
               <button id="download" matInput mat-raised-button (click)="downloadLinkClicked()">Download</button>
          </mat-grid-tile>
     
          <mat-grid-tile>
               <!-- Move To Server Button-->
               <button id="moveToServer" *ngIf="allowMoveToServer" matInput mat-raised-button (click)="moveToServerClick()">Move To Server</button>
          </mat-grid-tile>

          <mat-grid-tile>
               <!-- Save Values checkbox -->
               <mat-checkbox class="saveValues" [(ngModel)]="saveValues">Save Values</mat-checkbox>

               <!-- Restart Button -->
               <button id="restart" color="primary" matInput mat-raised-button (click)="restartButtonClick()" id="restart">Restart</button>
          </mat-grid-tile>
     </mat-grid-list>

     <!-- Status -->
     <div class='statusMessage' (dblclick)="statusDoubleClick()">
          {{statusMessage}}
     </div>
     
     <!-- Stepper -->
     <mat-horizontal-stepper *ngIf="isSubmitted && !isFinished" [linear]="true" [selectedIndex]="currentStep" #stepper>
        <mat-step *ngFor="let key of dataService.getSteps();trackBy: trackByFn" [stepControl]="currentStep" completed="false" editable="false">   
               <ng-template matStepLabel>{{key}}</ng-template>
          </mat-step>
     </mat-horizontal-stepper>
     
     <!-- Download status messages -->
     <div *ngIf="isSubmitted && currentStep == 0 && downloadStatusVisible">{{downloadStatus}}</div>     
</mat-card>

<!-- Supported URLs -->
<mat-card>
     <mat-checkbox  [(ngModel)]="supportedURLsVisible" (change)="showSupportedSitesToggle()">Show supported sites</mat-checkbox>

     <mat-form-field *ngIf="supportedURLsVisible">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
     </mat-form-field>

     <mat-paginator *ngIf="supportedURLsVisible" #supportedURLsPaginator [pageSizeOptions]="[100,10,25,50,500,1000]"></mat-paginator>

     <table *ngIf="supportedURLsVisible" mat-table matSort [dataSource]="supportedURLsDataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="URL">
               <th mat-header-cell *matHeaderCellDef mat-sort-header> URL </th>
               <td mat-cell *matCellDef="let element"> {{element}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['URL']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['URL'];"></tr>
     </table>
</mat-card>

<!-- Debugging checkbox URLs -->
<mat-card *ngIf="debuggingCheckboxVisible">
     <mat-checkbox [(ngModel)]="debugging">Debugging</mat-checkbox>
</mat-card>